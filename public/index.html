<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🌊 Giám sát lưu lượng nước ESP32</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>🌊 Giám sát lưu lượng nước</h1>
        
        <!-- Panel trạng thái kết nối -->
        <div class="status-panel">
            <div class="status-card">
                <div><span id="wsStatus" class="status-indicator disconnected"></span>WebSocket ESP32</div>
                <div id="wsStatusText">Đang kết nối...</div>
            </div>
            <div class="status-card">
                <div><span id="fbStatus" class="status-indicator disconnected"></span>Firebase</div>
                <div id="fbStatusText">Đang kết nối...</div>
            </div>
        </div>
        
        <!-- Hiển thị lưu lượng -->
        <div class="flow-display">
            <div class="flow-value" id="flowValue">--</div>
            <div class="flow-unit">L/min</div>
        </div>
        
        <!-- Input IP ESP32 -->
        <div class="input-group">
            <input type="text" id="espIP" placeholder="IP ESP32 (192.168.1.xxx)" value="192.168.1.100">
        </div>
        
        <!-- Các nút điều khiển -->
        <div class="controls">
            <button onclick="connectWebSocket()">🔌 Kết nối ESP32</button>
            <button onclick="disconnectWebSocket()">❌ Ngắt kết nối</button>
            <button onclick="sendTestMessage()">📤 Test message</button>
            <button onclick="clearLog()">🗑️ Xóa log</button>
        </div>
    </div>
    
    <!-- Panel log -->
    <div class="container">
        <h3>📋 Log kết nối</h3>
        <div class="log" id="logContainer"></div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <!-- JavaScript chính -->
    <script src="script.js"></script>
</body>
</html>
